const Mongodb=require('mongodb');
const ObjectId= Mongodb.ObjectId;
const {getdb}=require('../util/database');

class User{
    constructor(name,email){
        this.name=name;
        this.email=email;
    }

    //to save a user
    save(){
        let db=getdb();
        return db.collection('users').insertOne(this)
        .then(user=>{
            console.log("user added");
            return user;
        })
        .catch(err=>console.log("while adding user",err))
    }
    //find by id
   static findById(id){
        console.log(id);
        const db=getdb();
        return db.collection('users').find({ _id:new ObjectId(id) })
        .next()
        .then(user=>{
            return user;
        })
        .catch(err=>console.log(err))
    }

}
module.exports=User;